# Домашнее задание к занятию "Базы данных в облаке"
## ` Дмитрий Климов `

### Задание

Создание кластера
Перейдите на главную страницу сервиса Managed Service for PostgreSQL.
Создайте кластер PostgreSQL со следующими параметрами:
класс хоста: s2.micro, диск network-ssd любого размера;
хосты: нужно создать два хоста в двух разных зонах доступности и указать необходимость публичного доступа, то есть публичного IP адреса, для них;
установите учётную запись для пользователя и базы.
Остальные параметры оставьте по умолчанию либо измените по своему усмотрению.

Нажмите кнопку «Создать кластер» и дождитесь окончания процесса создания, статус кластера = RUNNING. Кластер создаётся от 5 до 10 минут.
Подключение к мастеру и реплике
Используйте инструкцию по подключению к кластеру, доступную на вкладке «Обзор»: cкачайте SSL-сертификат и подключитесь к кластеру с помощью утилиты psql, указав hostname всех узлов и атрибут target_session_attrs=read-write.

Проверьте, что подключение прошло к master-узлу.

select case when pg_is_in_recovery() then 'REPLICA' else 'MASTER' end;
Посмотрите количество подключенных реплик:
select count(*) from pg_stat_replication;
Проверьте работоспособность репликации в кластере
Создайте таблицу и вставьте одну-две строки.
CREATE TABLE test_table(text varchar);
insert into test_table values('Строка 1');
Выйдите из psql командой \q.

Теперь подключитесь к узлу-реплике. Для этого из команды подключения удалите атрибут target_session_attrs и в параметре атрибут host передайте только имя хоста-реплики. Роли хостов можно посмотреть на соответствующей вкладке UI консоли.


### Ответ:

<img width="1920" height="1080" alt="Снимок экрана (1187)" src="https://github.com/user-attachments/assets/f6d60887-95a2-44eb-8d7c-9d0a66dd2465" />


<img width="1920" height="1080" alt="Снимок экрана (1188)" src="https://github.com/user-attachments/assets/4f79b2d0-72aa-4613-be17-1c444ec487dd" />


<img width="1920" height="1080" alt="Снимок экрана (1189)" src="https://github.com/user-attachments/assets/69adfba0-abb4-4152-a5b9-60dfe22b6380" />
